buildscript {
    ext {
        set('springBootVersion', '3.4.2')
        set('gradleDependencyVersion', '1.1.7')
    }

    repositories {
        mavenCentral()
    }

    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
        classpath("io.spring.gradle:dependency-management-plugin:${gradleDependencyVersion}")
    }
}

allprojects {
    group 'com.study.til'
}

subprojects {
    apply plugin: 'java'
    apply plugin: 'java-library'

    sourceCompatibility = 23

    repositories {
        mavenLocal()
        mavenCentral()
    }

    if (it.name != "design_pattern") {
        apply plugin: 'org.springframework.boot'
        apply plugin: 'io.spring.dependency-management'

        dependencies {
            implementation platform("org.springframework.boot:spring-boot-dependencies:${springBootVersion}")
            implementation 'org.projectlombok:lombok'
            implementation 'org.springframework:spring-context'

            testImplementation 'org.springframework.boot:spring-boot-starter-test'
            testImplementation 'org.junit.jupiter:junit-jupiter:5.11.4'

            annotationProcessor 'org.projectlombok:lombok'
            testAnnotationProcessor 'org.projectlombok:lombok'
        }
    }

    if (it.name == "nexus_libaray") {
        apply plugin: 'maven-publish'
    }

    test {
        useJUnitPlatform()
    }
}

project(':spring_application') {
    dependencies {
        implementation project(':controller')
        implementation project(':event_listener')
        implementation project(':message_broker')
    }
}

project(':controller') {
    dependencies {}
}

project(':message_broker') {
    dependencies {
        implementation project(':nexus_libaray')
    }
}
project(':event_listener') {}
project(':spring_webflux') {}
project(':nexus_libaray') {}